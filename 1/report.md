# Отчет по лабораторной работе №1

## Условие задачи

Составить программу деления двух чисел, где порядок имеет до 5 знаков: от –99999 до +99999, а мантисса – до 30 знаков.

## Техническое задание

### Исходные данные

1. Строка с действительного числом в форме ±m.n Е ±K где суммарная длина мантиссы (m+n) - до 30 значащих цифр
2. Строка с целым числом длиной до 30 десятичных цифр

### Результат

Строка с действительным числом - результатом деления действительного числом на целое - в форме ±0.m1 Е ±K1, где m1 - до 30 значащих цифр, а K1 - до 5 цифр.

### Задача, реализуемая программой

Смоделировать операцию деления действительного числа в форме ±m.n Е ±K, где суммарная длина мантиссы (m+n) - до 30 значащих цифр, а величина порядка K - до 5 цифр, на целое число длиной до 30 десятичных цифр. Результат выдать в форме ±0.m1 Е ±K1, где m1 - до 30 значащих цифр, а K1 - до 5 цифр.

### Способ обращения к программе

1. Код программы компилируется с помощью скрипта `compile.sh <имя файла>`. Если `имя файла` не указано, приложение будет сохранено в `lab1`.
2. Программа запускается через консоль без параметров.

### Аварийные ситуации

1. Неправильный ввод
   - Вещественного числа. Допустимо не больше 30 цифр в мантиссе и не больше 5 цифр в порядке. Мантисса и порядок разделяется симоволом `E` или `e`.
   - Целого числа. Допустимо не больше 30 цифр.
2. Ошибка вовремя деления
   - ошибка деления на 0
   - ошибка переполнения порядка результата

## Cтруктуры данных

```c

typedef signed char t_digit; // тип цифры. хранит не символ, а число

typedef struct
{
    signed char sign; // знак числа
    int point; // индекс цифры, перед которой стоит точка
    int exponent; // экспонента
    t_digit digits[MANTISSA_LEN]; // массив цифр
} t_decimal;
```

## Алгоритм

Деление происходит классическим делением "уголком". Вычитание знаменателя, умноженного на наибольшую цифру, заменено последовательным вычитанием знаменателя.

1. сравниваем массивы цифр числителя и знаменателя

  - если числитель больше либо равен знаменателю, то вычитаем знаменатель, увеличиваем цифру частного
  - если числитель меньше знаменателя, то сдвигаем массив знаменателя на одну цифру в право, для расчета следующей цифры частного

2. Повторять 1\. пока все цифры частного + 1 не определятся

3. Округлить результат, отбросив последнюю цифру.

4. Расчитать экспоненту и знак частного

## Тесты

| Описание                         | Ввод                           | Вывод              |
| -------------------------------- | ------------------------------ | ------------------ |
| деление 2 единиц                 | `1`<br>`1`                     | `+0.1E+1`          |
| ввод букв в числитель            | `1a`<br>`1`                    | ошибка ввода       |
| ввод букв в знаменатель          | `1`<br>`1a`                    | ошибка ввода       |
| ввод. пробелы в начале           | `__1`<br>`__1`                 | `+0.1E+1`          |
| ввод. пробелы в конце            | `1__`<br>`1__`                 | `+0.1E+1`          |
| деление 2 целых числитель больше | `42`<br>`2`                    | `+0.21E+2`         |
| деление 2 целых числитель меньше | `21`<br>`42`                   | `+0.5E+0`          |
| деление на 0                     | `42`<br>`0`                    | ошибка дел.        |
| деление 0 на целое               | `0`<br>`5`                     | `+0.0E+0`          |
| ввод числителя с минусом         | `-6`<br>`2`                    | `-0.3E+1`          |
| ввод числителя с плюсом          | `+6`<br>`2`                    | `+0.3E+1`          |
| ввод знаменталя с минусом        | `6`<br>`-2`                    | `-0.3E+1`          |
| ввод знаменталя с плюсом         | `6`<br>`+2`                    | `+0.3E+1`          |
| деления отриц. числ. и знам.     | `-6`<br>`-2`                   | `+0.3E+1`          |
| ввод числителя с .               | `40.`<br>`2`                   | `+0.2E+2`          |
| ввод числителя с .0              | `40.0`<br>`2`                  | `+0.2E+2`          |
| ввод знаменталя с .0             | `40`<br>`2.0`                  | ошибка ввода       |
| ввод с точкой и знаком           | `-6.0`<br>`3`                  | `-0.2E+1`          |
| ввод 0. в начале вещественного   | `0.8`<br>`4`                   | `+0.2E+0`          |
| ввод . в начале вещественного    | `.8`<br>`4`                    | `+0.2E+0`          |
| ввод точки без цифр              | `.`<br>`3`                     | ошибка ввода       |
| ввод 0 в начале вещественного    | `000.8`<br>`2`                 | `+0.4E+0`          |
| ввод 29 0-ей в начале вещ. числа | `<0 29 раз>.8`<br>`2`          | `+0.4E+0`          |
| ввод 39 0-ей в начале вещ. числа | `<0 30 раз>.8`<br>`2`          | ошибка ввода       |
| ввод 0 в начале целого           | `0.8`<br>`002`                 | `+0.4E+0`          |
| ввод 29 0-ей в начале целого     | `0.8`<br>`<0 29 раз>2`         | `+0.4E+0`          |
| ввод 30 0-ей в начале целого     | `0.8`<br>`<0 30 раз>2`         | ошибка ввода       |
| ввод 0 после .                   | `0.008`<br>`2`                 | `+0.4E-2`          |
| ввод 29 цифр после 0.            | `0.<0 28 раз>8`<br>`2`         | `+0.4E-28`         |
| ввод 30 цифр после 0.            | `0.<0 29 раз>8`<br>`2`         | ошибка ввода       |
| ввод 29 0-ей после точки         | `8.<0 29 раз>`<br>`2`          | `+0.4E+1`          |
| ввод 30 0-ей после точки         | `8.<0 30 раз>`<br>`2`          | ошибка ввода       |
| ввод 30 цифр после .             | `.<0 29 раз>8`<br>`2`          | `+0.4E-29`         |
| ввод 31 цифр после .             | `.<0 30 раз>8`<br>`2`          | ошибка ввода       |
| ввод 30 цифр в числителе         | `9<0 29 раз>`<br>`3`           | `+0.3E+30`         |
| ввод 31 цифра в числителе        | `9<0 30 раз>`<br>`3`           | ошибка ввода       |
| ввод 30 цифр в знаменателе       | `9`<br>`3<0 29 раз>`           | `+0.3E-28`         |
| ввод 31 цифра в знаменателе      | `9`<br>`3<0 30 раз>`           | ошибка ввода       |
| деление 30 цифр в числ. и знам.  | `9<0 29 раз>`<br>`3<0 29 раз>` | `+0.3E+1`          |
| ввод числителя с экспонентой     | `9E10`<br>`3`                  | `+0.3E+11`         |
| ввод знаменталя с экспонентой    | `9`<br>`3E10`                  | ошибка ввода       |
| ввод экспоненты с плюсом         | `9E+10`<br>`3`                 | `+0.3E+11`         |
| ввод экспоненты с -              | `9E-10`<br>`3`                 | `+0.3E-9`          |
| ввод экспоненты с буквой         | `9Ea`<br>`3`                   | ошибка ввода       |
| ввод экспоненты с пробелом перед | `9 E10`<br>`3`                 | ошибка ввода       |
| ввод экспоненты с пробелом после | `9E 10`<br>`3`                 | ошибка ввода       |
| ввод точки перед экспонентой     | `9.E10`<br>`3`                 | `+0.3E+11`         |
| ввод макс. эксп. в норм. виде    | `.1E99999`<br>`1`              | `+0.1E+99999`      |
| деления макс. экс. с умен. эксп. | `1E99999`<br>`10`              | `+0.1E+99999`      |
| деления макс. экс. с сохр. эксп. | `1E99999`<br>`1`               | ошибка дел.        |
| деления макс. экс. с увел. эксп. | `0.1E-99999`<br>`10`           | ошибка дел.        |
| деления с получением периода     | `1`<br>`3`                     | `0.<3 30 раз>E+0`  |
| деления с округлением            | `2`<br>`3`                     | `0.<6 29 раз>7E+0` |

## Функции

```c
// src/main.c
/*
  Выводит в консоль приветственное сообщение c описанием программы
*/
void print_hello();

/*
  Выводит в консоль линейку в 30 символов
*/
void print_ruler();

// src/decimal/main.h
/*
  Записывает в val 0
*/
void set_zero_decimal(t_decimal *val);

// src/decimal/io.h
/*
  Считывает из консоли целое
*/
int scanf_decimal_int(t_decimal *val);
/*
  Считывает из консоли вещественное число
*/
int scanf_decimal_float(t_decimal *val);
/*
  Записывает в консоль val как целое число
*/
void print_decimal_int(const t_decimal *val);
/*
  Записывает в консоль val как вещественное число
*/
void print_decimal_float(const t_decimal *val);

// src/decimal/division.h
/*
  Делит числа.
  Результат записывается в нормализованном виде в quotient.
  Возвращает OK или ERR если произошла ошибка
*/
int divide_decimal(
    const t_decimal *dividend,
    const t_decimal *divider,
    t_decimal *quotient
);

// src/decimal/division.c
/*
   Считает количество нулей в начале массива цифр.
*/
int get_start_zeros_number(const t_digit *arr);
```

## Вывод

  В данной лабораторной работе было изучено представление чисел, выходящими за
разрядную сетку компьютера, а также арифметичские операции над ними. Было
запрограммировано считывание и вывод длинных чисел, операция деления вещественного
числа на целое.
